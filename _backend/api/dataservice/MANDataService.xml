<data name="MANDataService" transports="http https local">
   <description>DataService  para AssetPlanner                             &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                &#xd;                                </description>
   <config enableOData="false" id="AssetPlannerDataSource">
      <property name="carbon_datasource_name">AssetPlannerDataSource</property>
   </config>
   <query id="getKPIDisponibiidadPorFecha" useConfig="AssetPlannerDataSource">
      <sql>select activas.horas_activas / totales.horas_totales * 100 as disponibilidad&#xd;from&#xd;(select sum(his_lec.horas) horas_activas&#xd;from&#xd;(&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin, str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa,&#xd;	h.fec_inicio_usr,&#xd;	h.fec_fin_usr&#xd;from&#xd;    (select param.fec_inicio fec_inicio_usr, param.fec_fin fec_fin_usr,&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;	,(select&#xd;            :fec_inicio fec_inicio,&#xd;            :fec_fin fec_fin&#xd;    )&#xd;      param&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa= :id_empresa&#xd;and his_lec.estado = 'AC'&#xd;and (his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;or (&#xd;	  	(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 	and his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	or(&#xd;	 		his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and( his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and his_lec.fecha_inicio &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	)&#xd;	 	or(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;	 		and&#xd;	 		(&#xd;	 		his_lec.fecha_inicio &lt; str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;	 		and his_lec.fecha_fin &gt;= str_to_date( concat(fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;			)&#xd;	 	)&#xd;	))&#xd;	) activas&#xd;,(select sum(his_lec.horas) horas_totales&#xd;from (&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin, str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa,&#xd;	h.fec_inicio_usr,&#xd;	h.fec_fin_usr&#xd;from &#xd;(select param.fec_inicio fec_inicio_usr, param.fec_fin fec_fin_usr,&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;	,(select&#xd;            :fec_inicio2 fec_inicio,&#xd;            :fec_fin2 fec_fin&#xd;    )&#xd;      param&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa= :id_empresa2&#xd;and (his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;or (&#xd;	  	(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 	and his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	or(&#xd;	 		his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and( his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and his_lec.fecha_inicio &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	)&#xd;	 	or(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and&#xd;	 		(&#xd;	 		his_lec.fecha_inicio &lt; str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;	 		and his_lec.fecha_fin &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;			)&#xd;	 	)&#xd;	))) totales</sql>
      <result outputType="json">{"respuesta":{ "disponibilidad":"$disponibilidad" }}</result>
      <param name="id_empresa" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="id_empresa2" sqlType="STRING"/>
      <param name="fec_inicio2" sqlType="STRING"/>
      <param name="fec_fin2" sqlType="STRING"/>
   </query>
   <query id="getKPIDisponibiidadPorFechaPorEquipo" useConfig="AssetPlannerDataSource">
      <sql>select activas.horas_activas / totales.horas_totales * 100 as disponibilidad&#xd;from&#xd;(select sum(his_lec.horas) horas_activas&#xd;from&#xd;(&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin, str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa,&#xd;	h.fec_inicio_usr,&#xd;	h.fec_fin_usr&#xd;from&#xd;    (select param.fec_inicio fec_inicio_usr, param.fec_fin fec_fin_usr,&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;	,(select&#xd;            :fec_inicio fec_inicio,&#xd;            :fec_fin fec_fin&#xd;    )&#xd;      param&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa= :id_empresa&#xd;and his_lec.id_equipo = :id_equipo&#xd;and his_lec.estado = 'AC'&#xd;and (his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;or (&#xd;	  	(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 	and his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	or(&#xd;	 		his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and( his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and his_lec.fecha_inicio &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	)&#xd;	 	or(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;	 		and&#xd;	 		(&#xd;	 		his_lec.fecha_inicio &lt; str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;	 		and his_lec.fecha_fin &gt;= str_to_date( concat(fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;			)&#xd;	 	)&#xd;	))&#xd;	) activas&#xd;,(select sum(his_lec.horas) horas_totales&#xd;from (&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin, str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa,&#xd;	h.fec_inicio_usr,&#xd;	h.fec_fin_usr&#xd;from &#xd;(select param.fec_inicio fec_inicio_usr, param.fec_fin fec_fin_usr,&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;	,(select&#xd;            :fec_inicio2 fec_inicio,&#xd;            :fec_fin2 fec_fin&#xd;    )&#xd;      param&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa= :id_empresa2&#xd;and his_lec.id_equipo = :id_equipo2&#xd;and (his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;or (&#xd;	  	(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 	and his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	or(&#xd;	 		his_lec.fecha_inicio &lt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and( his_lec.fecha_fin &lt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and his_lec.fecha_inicio &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio) &#xd;	 	)&#xd;	 	or(his_lec.fecha_inicio &gt;= str_to_date( concat( fec_inicio_usr,' 00:00:00') , '%Y-%m-%d %H:%i:%s') &#xd;	 		and&#xd;	 		(&#xd;	 		his_lec.fecha_inicio &lt; str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;	 		and his_lec.fecha_fin &gt;= str_to_date( concat( fec_fin_usr,' 23:59:59') , '%Y-%m-%d %H:%i:%s')and his_lec.fecha_fin &gt;= his_lec.fecha_inicio&#xd;			)&#xd;	 	)&#xd;	))) totales</sql>
      <result outputType="json">{"respuesta":{ "disponibilidad":"$disponibilidad"}}</result>
      <param name="id_empresa" sqlType="STRING"/>
      <param name="id_equipo" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="id_empresa2" sqlType="STRING"/>
      <param name="fec_inicio2" sqlType="STRING"/>
      <param name="fec_fin2" sqlType="STRING"/>
      <param name="id_equipo2" sqlType="STRING"/>
   </query>
   <query id="getKPIMttrporFecha" useConfig="AssetPlannerDataSource">
      <sql>select inactivas.horas_inactivas / fallos.numero_fallos as mttr&#xd;from&#xd;(&#xd;select sum(his_lec.horas) horas_inactivas&#xd;from (&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa&#xd;and his_lec.estado = 'RE'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) inactivas&#xd;,(select COUNT(his_lec.estado) AS numero_fallos&#xd;from (&#xd;select h.id_lectura,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa2&#xd;and his_lec.estado = 'RE'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio2,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin2,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fallos</sql>
      <result outputType="json">{"respuesta":{ "mttr":"$mttr" }}</result>
      <param name="id_empresa" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="id_empresa2" sqlType="STRING"/>
      <param name="fec_inicio2" sqlType="STRING"/>
      <param name="fec_fin2" sqlType="STRING"/>
   </query>
   <query id="getKPIMttrporFechaxEquipo" useConfig="AssetPlannerDataSource">
      <sql>select inactivas.horas_inactivas / fallos.numero_fallos as mttr&#xd;from&#xd;(&#xd;select sum(his_lec.horas) horas_inactivas&#xd;from (&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa&#xd;and his_lec.id_equipo = :id_equipo&#xd;and his_lec.estado = 'RE'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) inactivas&#xd;,(select COUNT(his_lec.estado) AS numero_fallos&#xd;from (&#xd;select h.id_lectura,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa2&#xd;and his_lec.id_equipo = :id_equipo2&#xd;and his_lec.estado = 'RE'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio2,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin2,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fallos</sql>
      <result outputType="json">{"respuesta":{ "mttr":"$mttr" }}</result>
      <param name="id_empresa" sqlType="STRING"/>
      <param name="id_equipo" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="id_empresa2" sqlType="STRING"/>
      <param name="id_equipo2" sqlType="STRING"/>
      <param name="fec_inicio2" sqlType="STRING"/>
      <param name="fec_fin2" sqlType="STRING"/>
   </query>
   <query id="getKPIMttfporFecha" useConfig="AssetPlannerDataSource">
      <sql>select activas.horas_activas / fallos.numero_fallos as mttf&#xd;from&#xd;(&#xd;select sum(his_lec.horas) horas_activas&#xd;from (&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa&#xd;and his_lec.estado = 'AC'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) activas&#xd;,(select COUNT(his_lec.estado) AS numero_fallos&#xd;from (&#xd;select h.id_lectura,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa2&#xd;and his_lec.estado = 'RE'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio2,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin2,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fallos</sql>
      <result outputType="json">{"respuesta":{ "mttf":"$mttf" }}</result>
      <param name="id_empresa" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="id_empresa2" sqlType="STRING"/>
      <param name="fec_inicio2" sqlType="STRING"/>
      <param name="fec_fin2" sqlType="STRING"/>
   </query>
   <query id="getKPIMttfporFechaporEquipo" useConfig="AssetPlannerDataSource">
      <sql>select activas.horas_activas / fallos.numero_fallos as mttf&#xd;from&#xd;(&#xd;select sum(his_lec.horas) horas_activas&#xd;from (&#xd;select h.id_lectura ,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa&#xd;and his_lec.id_equipo = :id_equipo&#xd;and his_lec.estado = 'RE'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) activas&#xd;,(select COUNT(his_lec.estado) AS numero_fallos&#xd;from (&#xd;select h.id_lectura,&#xd;	h.id_equipo,&#xd;	h.fecha_inicio, &#xd;	IFNULL(h.fecha_fin,CURRENT_TIMESTAMP) fecha_fin,&#xd;	TIMESTAMPDIFF( MINUTE , h.fecha_inicio, IFNULL(h.fecha_fin,CURRENT_TIMESTAMP))/24 horas,&#xd;	h.estado,&#xd;	h.id_empresa&#xd;from (select&#xd;	hl.id_lectura,&#xd;	e.id_equipo,&#xd;	hl.fecha fecha_inicio, &#xd;	(select hl2.fecha&#xd;	from historial_lecturas hl2&#xd;	where hl2.id_equipo = hl.id_equipo&#xd;	and hl2.id_lectura &gt; hl.id_lectura&#xd;	order by hl2.id_lectura&#xd;	limit 1) fecha_fin&#xd;	,hl.estado&#xd;	,e.id_empresa&#xd;from historial_lecturas hl &#xd;	, equipos e&#xd;where e.id_equipo = hl.id_equipo) h) his_lec&#xd;where his_lec.id_empresa=:id_empresa2&#xd;and his_lec.id_equipo = :id_equipo2&#xd;and his_lec.estado = 'RE'&#xd;and his_lec.fecha_inicio &gt;= str_to_date( concat( :fec_inicio2,' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;and his_lec.fecha_fin &lt;= str_to_date( concat(:fec_fin2,' 23:59:59') , '%Y-%m-%d %H:%i:%s')) fallos</sql>
      <result outputType="json">{"respuesta":{ "mttf":"$mttf" }}</result>
      <param name="id_empresa" sqlType="STRING"/>
      <param name="id_equipo" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="id_empresa2" sqlType="STRING"/>
      <param name="id_equipo2" sqlType="STRING"/>
      <param name="fec_inicio2" sqlType="STRING"/>
      <param name="fec_fin2" sqlType="STRING"/>
   </query>
   <query id="getTiempoTotal" useConfig="AssetPlannerDataSource">
      <sql>select count_labourdays(str_to_date(:fecha_inicio, '%Y-%m-%d' ) , str_to_date(:fecha_fin , '%Y-%m-%d'))  * :horas_laborales as tiempo_total</sql>
      <result outputType="json">{"respuesta":{ "tiempo_total":"$tiempo_total" }}</result>
      <param name="fecha_inicio" sqlType="STRING"/>
      <param name="fecha_fin" sqlType="STRING"/>
      <param name="horas_laborales" sqlType="STRING"/>
   </query>
   <query id="getTiempoTotalReparacion" useConfig="AssetPlannerDataSource">
      <sql>SELECT IFNULL(sum(tiempo_reparac), 0) as tiempo_total_reparacion&#xd;	FROM(&#xd;	select e.id_equipo, histo.tiempo_reparac, histo.fec_ini, histo.fec_fi &#xd;	from equipos e&#xd;	inner join(&#xd;		SELECT&#xd;			reparac.id_equipo,&#xd;			reparac.inicio_reparacion fec_ini,&#xd;			reparac.fin_reparacion fec_fi,&#xd;			(count_labourdays(cast(reparac.inicio_reparacion as date) , cast(reparac.fin_reparacion AS DATE))) * :horas_laborales as tiempo_reparac&#xd;		FROM&#xd;			(&#xd;			SELECT&#xd;				:fec_inicio fec_inicio,&#xd;				:fec_fin fec_fin&#xd;    			)&#xd;      		param,&#xd;			(&#xd;			SELECT&#xd;				reparaciones.id_equipo ,&#xd;				reparaciones.inicio_reparacion,&#xd;				reparaciones.fin_reparacion	&#xd;			FROM&#xd;				(&#xd;				SELECT&#xd;					id_equipo,&#xd;					CASE&#xd;						WHEN (fecha_inicio_reparacion &lt; str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;						AND fecha_inicio_reparacion &gt; fecha_fin_reparacion&#xd;						OR fecha_inicio_reparacion &lt; str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s')) &#xd;				        THEN str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;						ELSE fecha_inicio_reparacion&#xd;					END AS inicio_reparacion,&#xd;					CASE&#xd;						WHEN (fecha_fin_reparacion &gt; str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;						AND fecha_inicio_reparacion &gt; fecha_fin_reparacion&#xd;						OR fecha_fin_reparacion &gt; str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s'))&#xd;				        THEN str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;						ELSE fecha_fin_reparacion&#xd;					END AS fin_reparacion&#xd;				FROM&#xd;					(&#xd;					SELECT&#xd;						param.fec_fin AS fecha_fin,&#xd;						param.fec_inicio AS fecha_inicio,&#xd;						id_equipo,&#xd;						fecha AS fecha_inicio_reparacion,&#xd;						IFNULL(&#xd;				           		(SELECT MIN(fecha) &#xd;				            	FROM historial_lecturas AS r2 &#xd;				            	WHERE r2.id_equipo = r1.id_equipo &#xd;				            	AND r2.fecha &gt; r1.fecha &#xd;				            	AND r2.estado = 'AC'&#xd;				           		), &#xd;				           		NOW() &#xd;				            ) AS fecha_fin_reparacion&#xd;					FROM&#xd;						historial_lecturas AS r1,&#xd;						(&#xd;						SELECT&#xd;							:fec_inicio3 fec_inicio,&#xd;							:fec_fin3 fec_fin&#xd;				    			)&#xd;				      		param&#xd;					WHERE&#xd;						r1.estado = 'RE'&#xd;						AND r1.fecha &lt;= str_to_date( concat( param.fec_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;				) AS intervalo_reparacion&#xd;				WHERE&#xd;					(fecha_inicio_reparacion &lt;= str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;						AND fecha_fin_reparacion &gt;= str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s'))&#xd;				ORDER BY&#xd;					inicio_reparacion) AS reparaciones&#xd;      		) reparac) histo&#xd;      		on histo.id_equipo = e.id_equipo&#xd;      		where e.id_empresa = :id_empresa&#xd;	)tiempo_reparacion</sql>
      <result outputType="json">{"respuesta":{ "tiempo_total_reparacion":"$tiempo_total_reparacion" }}</result>
      <param name="horas_laborales" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="fec_inicio3" sqlType="STRING"/>
      <param name="fec_fin3" sqlType="STRING"/>
      <param name="id_empresa" sqlType="STRING"/>
   </query>
   <query id="getCantidadEquiposxEmpresa" useConfig="AssetPlannerDataSource">
      <sql>select count(1) as cantidad&#xd;	from equipos e &#xd;	where e.id_empresa = :empr_id and (e.estado = 'AC' or e.estado = 'RE')</sql>
      <result outputType="json">{"respuesta":{ "cantidad":"$cantidad" }}</result>
      <param name="empr_id" sqlType="STRING"/>
   </query>
   <query id="getTiempoTotalReparacionxEquipo" useConfig="AssetPlannerDataSource">
      <sql>SELECT IFNULL(sum(tiempo_reparacion.tiempo_reparac), 0) as tiempo_total_reparacion&#xd;	FROM(&#xd;		SELECT&#xd;			reparac.id_equipo,&#xd;			reparac.inicio_reparacion fec_ini,&#xd;			reparac.fin_reparacion fec_fi,&#xd;			(count_labourdays(cast(reparac.inicio_reparacion as date) , cast(reparac.fin_reparacion AS DATE))) * :horas_laborales as tiempo_reparac&#xd;		FROM&#xd;			(&#xd;			SELECT&#xd;				:fec_inicio fec_inicio,&#xd;				:fec_fin fec_fin&#xd;    			)&#xd;      		param,&#xd;			(&#xd;			SELECT&#xd;				reparaciones.id_equipo ,&#xd;				reparaciones.inicio_reparacion,&#xd;				reparaciones.fin_reparacion	&#xd;			FROM&#xd;				(&#xd;				SELECT&#xd;					id_equipo,&#xd;					CASE&#xd;						WHEN (fecha_inicio_reparacion &lt; str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;						AND fecha_inicio_reparacion &gt; fecha_fin_reparacion&#xd;						OR fecha_inicio_reparacion &lt; str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s')) &#xd;				        THEN str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s')&#xd;						ELSE fecha_inicio_reparacion&#xd;					END AS inicio_reparacion,&#xd;					CASE&#xd;						WHEN (fecha_fin_reparacion &gt; str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;						AND fecha_inicio_reparacion &gt; fecha_fin_reparacion&#xd;						OR fecha_fin_reparacion &gt; str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s'))&#xd;				        THEN str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;						ELSE fecha_fin_reparacion&#xd;					END AS fin_reparacion&#xd;				FROM&#xd;					(&#xd;					SELECT&#xd;						param.fec_fin AS fecha_fin,&#xd;						param.fec_inicio AS fecha_inicio,&#xd;						id_equipo,&#xd;						fecha AS fecha_inicio_reparacion,&#xd;						IFNULL(&#xd;				           		(SELECT MIN(fecha) &#xd;				            	FROM historial_lecturas AS r2 &#xd;				            	WHERE r2.id_equipo = r1.id_equipo &#xd;				            	AND r2.fecha &gt; r1.fecha &#xd;				            	AND r2.estado = 'AC'&#xd;				           		), &#xd;				           		NOW() &#xd;				            ) AS fecha_fin_reparacion&#xd;					FROM&#xd;						historial_lecturas AS r1,&#xd;						(&#xd;						SELECT&#xd;							:fec_inicio3 fec_inicio,&#xd;							:fec_fin3 fec_fin&#xd;				    			)&#xd;				      		param&#xd;					WHERE&#xd;						r1.estado = 'RE'&#xd;						AND r1.fecha &lt;= str_to_date( concat( param.fec_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;						AND r1.id_equipo = :id_equipo &#xd;				) AS intervalo_reparacion&#xd;				WHERE&#xd;					(fecha_inicio_reparacion &lt;= str_to_date( concat( fecha_fin , ' 23:59:59') , '%Y-%m-%d %H:%i:%s')&#xd;						AND fecha_fin_reparacion &gt;= str_to_date( concat( fecha_inicio, ' 00:00:00') , '%Y-%m-%d %H:%i:%s'))&#xd;				ORDER BY&#xd;					inicio_reparacion) AS reparaciones&#xd;      		) reparac&#xd;	)tiempo_reparacion</sql>
      <result outputType="json">{"respuesta":{ "tiempo_total_reparacion":"$tiempo_total_reparacion" }}</result>
      <param name="horas_laborales" sqlType="STRING"/>
      <param name="fec_inicio" sqlType="STRING"/>
      <param name="fec_fin" sqlType="STRING"/>
      <param name="fec_inicio3" sqlType="STRING"/>
      <param name="fec_fin3" sqlType="STRING"/>
      <param name="id_equipo" sqlType="STRING"/>
   </query>
   <resource method="GET" path="/kpiDisponibilidadxFecha/{id_empresa}/fecinicio/{fec_inicio}/fecfin/{fec_fin}/idempr/{id_empresa2}/fecinicio2/{fec_inicio2}/fecfin2/{fec_fin2}">
      <description>obtengo porcentaje de disponibilidad de los equipos por una fecha                                  &#xd;                                    &#xd;                                    </description>
      <call-query href="getKPIDisponibiidadPorFecha">
         <with-param name="id_empresa" query-param="id_empresa"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="id_empresa2" query-param="id_empresa2"/>
         <with-param name="fec_inicio2" query-param="fec_inicio2"/>
         <with-param name="fec_fin2" query-param="fec_fin2"/>
      </call-query>
   </resource>
   <resource method="GET" path="/kpiDisponibilidadxFechaxEquipo/{id_empresa}/idEquipo/{id_equipo}/fecinicio/{fec_inicio}/fecfin/{fec_fin}/idempr/{id_empresa2}/idEquipo2/{id_equipo2}/fecinicio2/{fec_inicio2}/fecfin2/{fec_fin2}">
      <description>obtengo la disponibilidad por fecha y por id_equipo                                 &#xd;                                    &#xd;                                    </description>
      <call-query href="getKPIDisponibiidadPorFechaPorEquipo">
         <with-param name="id_empresa" query-param="id_empresa"/>
         <with-param name="id_equipo" query-param="id_equipo"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="id_empresa2" query-param="id_empresa2"/>
         <with-param name="fec_inicio2" query-param="fec_inicio2"/>
         <with-param name="fec_fin2" query-param="fec_fin2"/>
         <with-param name="id_equipo2" query-param="id_equipo2"/>
      </call-query>
   </resource>
   <resource method="GET" path="/KpiMttrxFecha/empresa/{id_empresa}/fec_inicio/{fec_inicio}/fec_fin/{fec_fin}">
      <call-query href="getKPIMttrporFecha">
         <with-param name="id_empresa" query-param="id_empresa"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
      </call-query>
   </resource>
   <resource method="GET" path="/KpiMttrxFechaxEquipo/empresa/{id_empresa}/equipo/{id_equipo}/fecinicio/{fec_inicio}/fecfin/{fec_fin}/empresa2/{id_empresa2}/equipo2/{id_equipo2}/fecinicio2/{fec_inicio2}/fecfin2/{fec_fin2}">
      <call-query href="getKPIMttrporFechaxEquipo">
         <with-param name="id_empresa" query-param="id_empresa"/>
         <with-param name="id_equipo" query-param="id_equipo"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="id_empresa2" query-param="id_empresa2"/>
         <with-param name="id_equipo2" query-param="id_equipo2"/>
         <with-param name="fec_inicio2" query-param="fec_inicio2"/>
         <with-param name="fec_fin2" query-param="fec_fin2"/>
      </call-query>
   </resource>
   <resource method="GET" path="/KpiMttrxFecha/empresa/{id_empresa}/fec_inicio/{fec_inicio}/fec_fin/{fec_fin}/empresa2/{id_empresa2}/fec_inicio2/{fec_inicio2}/fec_fin2/{fec_fin2}">
      <call-query href="getKPIMttrporFecha">
         <with-param name="id_empresa" query-param="id_empresa"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="id_empresa2" query-param="id_empresa2"/>
         <with-param name="fec_inicio2" query-param="fec_inicio2"/>
         <with-param name="fec_fin2" query-param="fec_fin2"/>
      </call-query>
   </resource>
   <resource method="GET" path="/KpiMttfxFecha/empresa/{id_empresa}/fec_inicio/{fec_inicio}/fec_fin/{fec_fin}/empresa2/{id_empresa2}/fec_inicio2/{fec_inicio2}/fec_fin2/{fec_fin2}">
      <call-query href="getKPIMttfporFecha">
         <with-param name="id_empresa" query-param="id_empresa"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="id_empresa2" query-param="id_empresa2"/>
         <with-param name="fec_inicio2" query-param="fec_inicio2"/>
         <with-param name="fec_fin2" query-param="fec_fin2"/>
      </call-query>
   </resource>
   <resource method="GET" path="/KpiMttfxFechaxEquipo/empresa/{id_empresa}/equipo/{id_equipo}/fecinicio/{fec_inicio}/fecfin/{fec_fin}/empresa2/{id_empresa2}/equipo2/{id_equipo2}/fecinicio2/{fec_inicio2}/fecfin2/{fec_fin2}">
      <call-query href="getKPIMttfporFechaporEquipo">
         <with-param name="id_empresa" query-param="id_empresa"/>
         <with-param name="id_equipo" query-param="id_equipo"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="id_empresa2" query-param="id_empresa2"/>
         <with-param name="id_equipo2" query-param="id_equipo2"/>
         <with-param name="fec_inicio2" query-param="fec_inicio2"/>
         <with-param name="fec_fin2" query-param="fec_fin2"/>
      </call-query>
   </resource>
   <resource method="GET" path="/getTiempoTotal/{fecha_inicio}/{fecha_fin}/{horas_laborales}">
      <call-query href="getTiempoTotal">
         <with-param name="fecha_inicio" query-param="fecha_inicio"/>
         <with-param name="fecha_fin" query-param="fecha_fin"/>
         <with-param name="horas_laborales" query-param="horas_laborales"/>
      </call-query>
   </resource>
   <resource method="GET" path="/getTiempoTotalReparacion/{fec_inicio}/{fec_fin}/{fec_inicio3}/{fec_fin3}/{id_empresa}/{horas_laborales}">
      <call-query href="getTiempoTotalReparacion">
         <with-param name="horas_laborales" query-param="horas_laborales"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="fec_inicio3" query-param="fec_inicio3"/>
         <with-param name="fec_fin3" query-param="fec_fin3"/>
         <with-param name="id_empresa" query-param="id_empresa"/>
      </call-query>
   </resource>
   <resource method="GET" path="/getCantEquiposxEmpresa/{empr_id}">
      <call-query href="getCantidadEquiposxEmpresa">
         <with-param name="empr_id" query-param="empr_id"/>
      </call-query>
   </resource>
   <resource method="GET" path="/getTiempoTotalReparacionxEquipo/{fec_inicio}/{fec_fin}/{fec_inicio3}/{fec_fin3}/{id_equipo}/{horas_laborales}">
      <call-query href="getTiempoTotalReparacionxEquipo">
         <with-param name="horas_laborales" query-param="horas_laborales"/>
         <with-param name="fec_inicio" query-param="fec_inicio"/>
         <with-param name="fec_fin" query-param="fec_fin"/>
         <with-param name="fec_inicio3" query-param="fec_inicio3"/>
         <with-param name="fec_fin3" query-param="fec_fin3"/>
         <with-param name="id_equipo" query-param="id_equipo"/>
      </call-query>
   </resource>
</data>
